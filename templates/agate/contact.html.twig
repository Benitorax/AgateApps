{% extends 'agate/agate-layout.html.twig' %}

{% trans_default_domain 'agate' %}

{% form_theme form 'form/form_theme_materialize.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <script src="//www.google.com/recaptcha/api.js"></script>
{% endblock %}

{% block content_for_layout %}
    <div class="container">

        <div class="row">
            <div class="col s6 offset-s3">
                {% block flash_messages %}
                    {{ parent() }}
                {% endblock %}

                <h1 class="text-4xl center">{{ 'contact.send_message'|trans }}</h1>

                {{ form_start(form, {attr: {id: 'contact_form'}}) -}}

                {{ form_errors(form) }}

                {{- form_row(form.name) -}}
                {{- form_row(form.email) -}}
                {{- form_row(form.subject) -}}
                {{- form_row(form.message) -}}

                <button class="btn g-recaptcha" type="submit" data-sitekey="{{ google_recaptcha_site_key }}" data-callback="onRecaptchaSubmit">{{ 'form.send'|trans({}, 'contact') }}</button>

                {{- form_end(form) }}
            </div>
        </div>

    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        function onRecaptchaSubmit() {
            document.getElementById('contact_form').submit();
        }
    </script>
{% endblock %}
