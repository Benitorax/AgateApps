{% extends '@Agate/agate-layout.html.twig' %}

{% trans_default_domain 'AgateBundle' %}

{% macro teamMember(name, length) %}
    {% set grid_class -%}
        m4 {% if length == 2 and loop.index0 == 0 -%}
            offset-m2
        {%- elseif length == 1 and loop.index0 == 0 -%}
            offset-m4
        {%- endif -%}
    {%- endset %}
    <div class="col {{ grid_class }}">
        {% set fullName = ('team.members.'~(name|lower)~'.name')|trans %}
        <div class="card-panel team-member">
            <img src="{{ asset('img/agate/team/'~name~'.jpg') }}" alt="{{ fullName }}" class="circle">
            <h3 class="text-l">
                {{ fullName }}
            </h3>
            <p class="text-xs">{{ ('team.members.'~(name|lower)~'.details')|trans|raw }}</p>
        </div>
    </div>
{% endmacro %}

{% import _self as macros %}

{% block stylesheets -%}
    {{- parent() -}}
    <style type="text/css">.sr-only {position: absolute;width: 1px;height: 1px;margin: -1px;padding: 0;overflow: hidden;clip: rect(0,0,0,0);border: 0;}</style>
{%- endblock %}

{% block content_for_layout %}
    {% spaceless %}

        <div class="parallax-container valign-wrapper">
            <div class="section no-pad-bot">
                <div class="container">
                    <h1 class="header center white-text text-shadow-black-10">{{ 'team.main_title'|trans }}</h1>
                </div>
            </div>
            <div class="parallax">
                <img src="{{ asset('img/agate/Esteren_Crew.jpg') }}" alt="Ã‰quipe des Ombres d'Esteren">
            </div>
        </div>

        <div class="container">
            <div class="section">
                <div class="row">
                    <div class="col s12 center text-m">
                        <h2 class="text-xl">{{ 'team.permanent_members'|trans }}</h2>
                        {% set teamMembers = [
                            'asami',
                            'clovis',
                            'gawain',
                            'iris',
                            'nel',
                            'pierstoval'
                        ] %}

                        {% for members in teamMembers|batch(3) %}
                            <div class="row">
                                {% set length = members|length %}
                                {% for name in members %}
                                    {{ macros.teamMember(name, length) }}
                                {% endfor %}
                            </div>
                        {% endfor %}
                    </div>
                </div>

                <div class="row">
                    <div class="col s12 center text-m">
                        <h2>{{ 'team.friends'|trans }}</h2>
                        <p>{{ 'team.friends_text'|trans }}</p>
                        {% set teamMembers = [
                            'akae',
                            'ben',
                            'chane',
                            'chris',
                            'clarisse_may',
                            'francois_rousselot',
                            'ginl',
                            'julien_blondel',
                            'nico_jamme'
                        ] %}

                        {% for members in teamMembers|batch(3) %}
                            <div class="row">
                                {% set length = members|length %}
                                {% for name in members %}
                                    {{ macros.teamMember(name, length) }}
                                {% endfor %}
                            </div>
                        {% endfor %}

                        <div class="card green lighten-5">
                            <div class="card-content">
                                {{ 'team.friends_thanks'|trans }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endspaceless %}
{% endblock %}
