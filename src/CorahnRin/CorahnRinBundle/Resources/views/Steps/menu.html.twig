{% set steps_length = steps|length %}
{{ dump(current_step) }}
<nav class="nav">
    <ul class="list-unstyled list-sm-inline step_list">

        {% set previous = null %}

        {% for stepName, loop_step in steps %}
            {% set is_superior_to_current = current_step.step >= loop_step.step %}
            {% set is_defined_step = current_character[loop_step.name] is defined %}
            {% set is_last_undefined_step = (previous and current_character[loop_step.name] is not defined and current_character[previous.name] is defined) %}

            {% if is_superior_to_current or is_defined_step or is_last_undefined_step %}
                <li{% if current_step and current_step.step == loop_step.step %} class="active"{% endif %}>
                    <a href="{{ path('pierstoval_character_generator_step', {'requestStep': stepName}) }}">
                        {{ current_step.step == loop_step.step ? '&raquo;' }} {{ loop_step.step }}. {{ loop_step.label | trans }}
                    </a>
                </li>
            {% else %}
                <li>{{ loop_step.step }}. {{ loop_step.label | trans }}</li>
            {% endif %}

            {% set previous = loop_step %}
        {% endfor %}
        {% if app.session.get('step') > 1 %}
            <li>
                <a href="{{ path('pierstoval_character_generator_reset') }}">{{ 'RÃ©initialiser le personnage' | trans }}</a>
            </li>
        {% endif %}

    </ul>
</nav>
{{ dump(current_character) }}
