{% extends "::layout.html.twig" %}

{% block title %}{{ 'Générateur' | trans }} - {{ loaded_step.title | trans }} - {{ parent() }}{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {% stylesheets
        '@CorahnRinGeneratorBundle/Resources/public/css/*'
        filter="cssrewrite"
        output="css/generator.css"
    %}<link rel="stylesheet" href="{{ app.request.getSchemeAndHttpHost() ~ asset_url }}" type="text/css" />
    {% endstylesheets %}
{% endblock %}

{% block content_for_layout %}
    <div class="row">
        <div class="col-sm-3 step_menu">
            {% render(controller("CorahnRinGeneratorBundle:Generator:menu", {"step":loaded_step})) %}
        </div>
        <div class="col-sm-9 step_module">
            <h1>{{ 'Étape' | trans }} {{ loaded_step.step }} : {{ loaded_step.title | trans }}</h1>
            <form name="generator_form" id="generator_form" method="post" action="{{ url('corahnrin_generator_generator_step', {'step':loaded_step.step,'slug':loaded_step.slug}) }}">
                <fieldset id="generator_{{ loaded_step.slug }}">
                    <button type="submit" id="submit_btn" class="btn btn-inverse">{{ 'Étape suivante' | trans }}</button>
                    <hr />
                    {% include loaded_step_filename %}
                    <hr />
                    <button type="submit" id="submit_btn" class="btn btn-inverse">{{ 'Étape suivante' | trans }}</button>
                </fieldset>
            </form>
        </div>
    </div>
    <pre>{{ pr(app.session.get('character')) }}</pre>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {% javascripts
    '@EsterenMapsBundle/Resources/public/js/leaflet-src.js'
    '@EsterenMapsBundle/Resources/public/js/leaflet.sidebar-src.js'
    '@EsterenMapsBundle/Resources/public/js/leaflet.draw-src.js'
    '@EsterenMapsBundle/Resources/public/js/EsterenMap/1_EsterenMap.js'
    '@EsterenMapsBundle/Resources/public/js/EsterenMap/2_LeafletDrawOverrides.js'
    '@EsterenMapsBundle/Resources/public/js/EsterenMap/3_EsterenMap_ActivateLeafletDraw.js'
    '@EsterenMapsBundle/Resources/public/js/EsterenMap/3_EsterenMap_options.js'
    '@EsterenMapsBundle/Resources/public/js/EsterenMap/4_EsterenMap_addMarker.js'
    '@EsterenMapsBundle/Resources/public/js/EsterenMap/4_EsterenMap_addPolyline.js'
    '@EsterenMapsBundle/Resources/public/js/EsterenMap/4_EsterenMap_addPolygon.js'
    output="js/maps.js"
    filter=""
    %}<script type="text/javascript" src="{{ app.request.getSchemeAndHttpHost() ~ asset_url }}"></script>
    {% endjavascripts %}

    {% javascripts
        '@CorahnRinGeneratorBundle/Resources/public/js/*'
        filter=""
        output="js/generator.js"
    %}<script type="text/javascript" src="{{ app.request.getSchemeAndHttpHost() ~ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}