(function(a){if(document.getElementById("map_dont_move")){document.getElementById("map_dont_move").onclick=function(){var b=this.getAttribute("data-active");if(b==="true"){b="false";document.corahn_rin_map.allowMove(true);this.parentNode.classList.remove("active");this.children[0].classList.remove("text-danger");this.children[0].classList.add("text-success")}else{b="true";document.corahn_rin_map.allowMove(false);this.parentNode.classList.add("active");this.children[0].classList.add("text-danger");this.children[0].classList.remove("text-success")}this.setAttribute("data-active",b);return false}}if(document.getElementById("map_add_zone")){document.getElementById("map_add_zone").onclick=function(){var h=this,n,g,d,m,e=document.getElementById(this.getAttribute("data-zones-container")?this.getAttribute("data-zones-container"):"map_zones"),f=document.getElementById(this.getAttribute("data-map-container")?this.getAttribute("data-map-container"):"map_container"),k=document.addZonePolygonId?document.addZonePolygonId:0,b=document.addZonePolygonIdFull?document.addZonePolygonIdFull:"",j=this.getAttribute("data-active");if(j==="true"){j="false";this.parentNode.classList.remove("active");if(document.addZoneCoordinates.length>3&&document.addZonePolygon){document.addZonePolygon.setAttribute("points",document.addZoneCoordinates.join(" "));var g=document.createElement("input");g.id=document.addZonePolygon.id;g.name=document.addZonePolygon.id;g.value=document.addZoneCoordinates.join(" ");f.appendChild(g);g=null}else{document.addZonePolygon.parentNode.removeChild(document.addZonePolygon)}document.addZoneCoordinates=[];document.addZonePolygon=null;document.addZoneMapContainerOffset=null;d=document.querySelectorAll("polygon:not([points])");m=d.length;for(g=0;g<m;g++){d[g].parentNode.removeChild(d[g])}}else{j="true";this.parentNode.classList.add("active");while(document.getElementById("map_add_zone_polygon_"+k)){k++}b="map_add_zone_polygon["+k+"]";n=document.createElementNS("http://www.w3.org/2000/svg","polygon");n.id=b;e.appendChild(n);document.addZoneCoordinates=[];document.addZonePolygon=n;document.addZoneMapContainerOffset=a(f).offset()}this.setAttribute("data-active",j);f.setAttribute("data-add-zone",j);a(e).height(a(f).height());e.onmousedown=j==="false"?null:function(c){if(f.getAttribute("data-add-zone")==="true"){f.base_coords=c.clientX+","+c.clientY}};f.onmousemove=j==="false"?null:function(i){if(f.getAttribute("data-add-zone")==="true"){if(f.getAttribute("data-add-zone")==="true"&&document.addZoneCoordinates.length){var c=typeof i.offsetX!=="undefined"?i.offsetX:i.clientX-document.addZoneMapContainerOffset.left+window.pageXOffset;var o=typeof i.offsetY!=="undefined"?i.offsetY:i.clientY-document.addZoneMapContainerOffset.top+window.pageYOffset;c=parseInt(c);o=parseInt(o);var l=document.addZoneCoordinates.concat([c+","+o]);document.addZonePolygon.setAttribute("points",l.join(" "))}}};e.onmouseup=j==="false"?null:function(l){if(f.getAttribute("data-add-zone")==="true"){var i=l.clientX+","+l.clientY;if(i===f.base_coords){var c=typeof l.offsetX!=="undefined"?l.offsetX:l.clientX-document.addZoneMapContainerOffset.left+window.pageXOffset;var o=typeof l.offsetY!=="undefined"?l.offsetY:l.clientY-document.addZoneMapContainerOffset.top+window.pageYOffset;c=parseInt(c);o=parseInt(o);if(isNaN(c)||isNaN(o)){console.error("Error with points "+(isNaN(c)?"x":"y")+"\n event : ",l);return false}document.addZoneCoordinates.push(c+","+o);document.addZonePolygon.setAttribute("points",document.addZoneCoordinates.join(" "))}}};return false}}})(jQuery);